<!DOCTYPE html>
<html>
<head>
	<title>DroneCast</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<header>
		<h1>DroneCast</h1>
	</header>

	<div class="first">
		<h3>Enter a city to find current weather conditions.</h3>
		<label for="city">City: </label>
		<input type="text" name="city" id="city"><br>
		<button id="search" name="search" onclick="getWeather()">Search</button>
	</div>

	<div id="second">
		<p id="response"></p>
	</div>

	<script type="text/javascript">
		function getWeather(){
			const api_key = '5dd7d13462ea2b7ba5176cd85add7658';
			var city = document.getElementById("city").value;
			console.log("Beggining weather search in " + city);

			var url = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + '&appid=' + api_key;
			console.log("The API URL is "+ url);

			fetch(url).then(response => {
				console.log(response);
				return response.json();
			}).then(response => {
				console.log(response);
				document.getElementById('second').innerHTML = JSON.stringify(response);
			}).catch(error => {
				console.error(error);
			});
		}
	</script>
</body>
</html>